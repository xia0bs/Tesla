Drupal.locale = { 'strings': {"":{"All":"\u5168\u90e8","Edit":"\u7f16\u8f91","Configure":"\u914d\u7f6e","Please wait...":"\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u540e...","Add":"\u52a0\u88c5","Remove":"\u79fb\u9664","Other":"\u5176\u4ed6","Gallery":"\u56fe\u96c6","Yes":"\u662f","No":"\u5426","Save":"\u4fdd\u5b58","Apply (all displays)":"\u7533\u8bf7","Next":"\u4e0b\u4e00\u6b65","Today":"\u73b0\u5728","January":"1\u6708","February":"2\u6708","March":"3\u6708","April":"4\u6708","May":"5\u6708","June":"6\u6708","July":"7\u6708","August":"8\u6708","September":"9\u6708","October":"10\u6708","November":"11\u6708","December":"12\u6708","Submit":"\u63d0\u4ea4","We could not sign you in using the\u003Cbr\/\u003Einformation you provided. Please try again.":"\u767b\u5f55\u5931\u8d25\uff0c\u60a8\u63d0\u4f9b\u7684\u4fe1\u606f\u4e0d\u6b63\u786e\u3002\u8bf7\u91cd\u8bd5\u3002","We could not sign you in using the information you provided. Please try again.":"\u767b\u5f55\u5931\u8d25\uff0c\u60a8\u63d0\u4f9b\u7684\u4fe1\u606f\u4e0d\u6b63\u786e\u3002\u8bf7\u91cd\u8bd5\u3002","Upload":"\u4e0a\u4f20","Close":"\u5173\u95ed","For your security, please provide a password at least eight characters long that contains at least one number and one letter.":"\u5b89\u5168\u8d77\u89c1\uff0c\u60a8\u7684\u5bc6\u7801\u957f\u5ea6\u5e94\u4e0d\u5c11\u4e8e 8 \u4e2a\u5b57\u7b26\uff0c\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u6570\u5b57\u548c\u4e00\u4e2a\u5b57\u6bcd\u3002","Adding both upper and lowercase letters.":"\u6dfb\u52a0\u5927\u5199\u548c\u5c0f\u5199\u5b57\u6bcd\u3002","Adding numbers.":"\u6dfb\u52a0\u6570\u5b57\u3002","These passwords do not match.":"\u5bc6\u7801\u4e0d\u5339\u914d\u3002","Province":"\u7701\u4efd","Sorry, there was an error processing your request, please try later...":"\u62b1\u6b49\uff0c\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5... ","We are processing your request, please wait...":"\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u3002\u8bf7\u7a0d\u5019\u3002","Your request has been successfully processed, please wait while this page refreshes...":"\u5df2\u6210\u529f\u5904\u7406\u60a8\u7684\u8bf7\u6c42\uff0c\u6b63\u5728\u5237\u65b0\u9875\u9762\uff0c\u8bf7\u7a0d\u5019... ","Sorry, there was an error processing your request, please wait while this page refreshes...":"\u62b1\u6b49\uff0c\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u6b63\u5728\u5237\u65b0\u9875\u9762\uff0c\u8bf7\u7a0d\u5019...","Payment Received":"\u5df2\u4ed8\u6b3e","Check Number":"\u652f\u7968\u7f16\u53f7","Reference Number:":"\u53c2\u8003\u7f16\u53f7","Thanks! Keep an eye out for the next edition of the Tesla Newsletter.":"\u8c22\u8c22\uff01\u8bf7\u7559\u610f\u4e0b\u4e00\u671f Tesla \u65b0\u95fb\u7a3f\u3002","Thanks!":"\u8c22\u8c22\uff01","Your profile has been updated successfully.":"\u60a8\u7684\u4e2a\u4eba\u8d44\u6599\u5df2\u7ecf\u6210\u529f\u66f4\u65b0\u3002","Change Your Profile Image":"\u66f4\u6362\u4e2a\u4eba\u8d44\u6599\u5934\u50cf","choose file":"\u9009\u62e9\u6587\u4ef6","Selected file: ":"\u9009\u5b9a\u6587\u4ef6\uff1a","Some required fields have been left blank. They are highlighted below in red.":"\u7ea2\u8272\u9ad8\u4eae\u90e8\u5206\u4e3a\u5fc5\u586b\u9879\u3002","format:":"\u683c\u5f0f\uff1a","First Name":"\u540d\u5b57","Cancelled":"\u5df2\u53d6\u6d88","Zip Code":"\u90ae\u653f\u7f16\u7801","Price":"\u4ef7\u683c","Europe":"\u6b27\u6d32","Last Name":"\u59d3\u6c0f","Email Address":"\u7535\u5b50\u90ae\u4ef6\u5730\u5740","Find Us":"\u67e5\u627e\u7279\u65af\u62c9\u4f53\u9a8c\u5e97\u3001\u670d\u52a1\u4e2d\u5fc3\u548c\u5145\u7535\u7ad9","TIME":"\u65f6\u95f4","COST":"\u7535\u8d39","ENERGY":"\u8017\u80fd","CANCEL":"\u53d6\u6d88","Supercharger":"\u8d85\u7ea7\u5145\u7535\u7ad9","LOCATE":"\u67e5\u627e","As soon as possible, mornings after 9am, etc...":"\u7acb\u5373\u3001\u4e0a\u5348 9 \u70b9\u4ee5\u540e\uff0c\u7b49\u7b49...","Request a Test Drive":"\u9884\u7ea6\u8bd5\u9a7e","Continue":"\u7ee7\u7eed","Cancel":"\u53d6\u6d88","- Select -":" \u8bf7\u9009\u62e9 ","Service Centers":"\u670d\u52a1\u4e2d\u5fc3","When do you want us to call you?":"\u60a8\u5e0c\u671b\u6211\u4eec\u4ec0\u4e48\u65f6\u95f4\u7ed9\u60a8\u56de\u62e8\u7535\u8bdd\uff1f","Test Drive":"\u9884\u7ea6\u8bd5\u9a7e","This is not a valid email address format. Please try again.":"\u8fd9\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u683c\u5f0f\u3002\u8bf7\u518d\u8bd5\u4e00\u6b21\u3002","Confirm":"\u786e\u8ba4","Reserve":"\u5373\u523b\u9884\u8ba2","Please select district":"\u8bf7\u9009\u62e9\u533a","Please select city":"\u8bf7\u9009\u62e9\u57ce\u5e02","Thank you":"\u8c22\u8c22\u60a8","Please enter a valid phone number":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u8bdd\u53f7\u7801","Type the code below":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff1a","Sorry, there was an error processing your request, please try again.":"\u62b1\u6b49\uff0c\u5904\u7406\u60a8\u7684\u7533\u8bf7\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002 ","Please select":"\u8bf7\u9009\u62e9","Sorry, there was an error saving your new password, please try again.":"\u62b1\u6b49\uff0c\u4fdd\u5b58\u65b0\u5bc6\u7801\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","Sign Up":"\u9884\u7ea6","Get Tesla Updates":"\u83b7\u53d6 Tesla \u6700\u65b0\u8d44\u8baf","CONTINUE":"\u7ee7\u7eed","Phone":"\u7535\u8bdd","View More":"\u5c55\u5f00","Map":"\u5730\u56fe","Your account has been locked due to too many failed login attempts. To unlock your account":"\u56e0\u767b\u5f55\u5c1d\u8bd5\u5931\u8d25\u6b21\u6570\u592a\u591a\uff0c\u60a8\u7684\u8d26\u6237\u5df2\u7ecf\u88ab\u9501\u5b9a\u3002\u5982\u8981\u89e3\u9501\u8d26\u6237\uff0c","Would you like to set China as your default locale?":"\u60a8\u662f\u5426\u60f3\u628a\u4e2d\u56fd\u8bbe\u4e3a\u60a8\u7684\u9ed8\u8ba4\u533a\u57df\u8bbe\u7f6e\uff1f","Sign up for our newsletter":"\u6ce8\u518c\u6211\u4eec\u7684\u901a\u8baf\u7a3f","Stay informed and up to date about Tesla Motors.":"\u968f\u65f6\u4e86\u89e3\u6709\u5173 Tesla\uff08\u7279\u65af\u62c9\uff09Motors \u7684\u8d44\u8baf\u3002","Please allow up to 48 hours for a\u003Cbr \/\u003Eresponse to your inquiry.":"\u6211\u4eec\u5c06\u5728 48 \u5c0f\u65f6\u4e4b\u5185\u7b54\u590d\u60a8","Keep an eye out for the next edition of the Tesla Newsletter.":"\u8bf7\u7559\u610f\u4e0b\u4e00\u671f Tesla \u65b0\u95fb\u7a3f\u3002","- Please select -":"- \u8bf7\u9009\u62e9 -","Please wait, we are processing your order.":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8ba2\u5355\u3002","Please wait, we are processing your request.":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8ba2\u5355\u3002","Please wait, we are processing your payment.":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u4ed8\u6b3e\u3002","Sorry, there was an error processing this request, please try again.":"\u62b1\u6b49\uff0c\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","Please wait, your information is being saved.":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u4fdd\u5b58\u60a8\u7684\u4fe1\u606f\u3002","Country:":"\u56fd\u5bb6\uff1a","Includes VAT of approx. ":"\u5305\u62ec\u4f30\u7b97\u589e\u503c\u7a0e","Some information is missing highlighted in red below.":"\u4e0b\u9762\u7ea2\u8272\u7a81\u51fa\u663e\u793a\u90e8\u5206\u51fa\u73b0\u4fe1\u606f\u4e22\u5931\u3002","Please wait, we are processing your request...":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u3002","RESERVE YOUR TESLA":"\u9884\u8ba2\u60a8\u7684 Tesla","CHARGE MY CARD":"\u7528\u5361\u652f\u4ed8","We are processing your payment. Please wait.":"\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\uff0c\u8bf7\u7a0d\u5019\u3002","We are processing your reservation.  Please wait.":"\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u9884\u8ba2\u3002\u8bf7\u7a0d\u5019\u3002","We are processing your order.  Please wait.":"\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\uff0c\u8bf7\u7a0d\u5019\u3002","\u0026nbsp;\u003Cbr\u003EWe are processing your credit card.  Please wait.":"\u0026nbsp;\u003Cbr\u003E\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u4fe1\u7528\u5361\u3002\u8bf7\u7a0d\u5019\u3002","You will be sent to 99Bill to complete payment.":"\u5c06\u8f6c\u5230\u652f\u4ed8\u5b9d\u7f51\u7ad9\u5b8c\u6210\u652f\u4ed8\u8fc7\u7a0b\u3002","You need to use you WeChat to scan the QRCode in the next page to complete payment.":"\u60a8\u9700\u8981\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e0b\u4e00\u9875\u7684\u4e8c\u7ef4\u7801\uff0c\u6765\u5b8c\u6210\u652f\u4ed8\u3002     ","REQUEST A CALL":"\u8981\u6c42\u7535\u8bdd\u56de\u62e8","There is some information missing highlighted below in red.":"\u4e0b\u9762\u7ea2\u8272\u7a81\u51fa\u663e\u793a\u90e8\u5206\u51fa\u73b0\u4fe1\u606f\u4e22\u5931\u3002","Please enter a valid postal code":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u653f\u7f16\u7801","Please enter a valid email":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u7bb1\u5730\u5740","Your passwords do not match, please try again.":"\u60a8\u7684\u5bc6\u7801\u4e0d\u5339\u914d\uff0c\u8bf7\u518d\u8bd5\u4e00\u6b21\u3002","Please choose your delivery country":"\u8bf7\u9009\u62e9\u60a8\u7684\u4ea4\u8d27\u56fd\u5bb6","Please enter a valid cvv number":"\u8bf7\u8f93\u5165\u6709\u6548\u7684 cvv \u7f16\u7801","Please wait, we are processing your request":"\u8bf7\u7a0d\u5019\uff0c\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u3002","Please Choose":"\u8bf7\u9009\u62e9","Note: Max allowed file size is 5MB":"\u6ce8\u610f\uff1a\u5141\u8bb8\u7684\u6587\u4ef6\u5927\u5c0f\u6700\u5927\u4e3a 5MB","File size must be between 0 and 5 MB":"\u6587\u4ef6\u5927\u5c0f\u5fc5\u987b\u5728 0 \u81f3 5MB \u4e4b\u95f4","Minimum 10 digits, special characters allowed are ()+-.":"\u6700\u5c11 10 \u4f4d\u6570\uff0c\u5141\u8bb8\u4f7f\u7528\u7684\u7279\u6b8a\u5b57\u7b26\u6709 (\u3001)\u3001+\u3001-\u3002","Driver license number cannot be the same for owner and co-owner.":"\u8f66\u4e3b\u548c\u8f66\u8f86\u5171\u6709\u8005\u4e0d\u5f97\u4f7f\u7528\u540c\u4e00\u4e2a\u9a7e\u9a76\u6267\u7167\u53f7\u7801\u3002","The postal code provided is invalid or does not match the state selected.":"\u60a8\u63d0\u4f9b\u7684\u90ae\u653f\u7f16\u7801\u65e0\u6548\u6216\u4e0e\u6240\u9009\u7684\u5dde\u4e0d\u7b26\u3002","Save failed. Please try again.":"\u4fdd\u5b58\u5931\u8d25\u3002\u8bf7\u91cd\u8bd5\u3002","Please select an appointment before saving.":"\u4fdd\u5b58\u524d\u8bf7\u9009\u62e9\u9884\u7ea6\u3002","Enter a valid policy number":"\u8f93\u5165\u6709\u6548\u7684\u653f\u7b56\u7f16\u53f7\u3002","Enter a valid policy expiration date":"\u8f93\u5165\u6709\u6548\u7684\u653f\u7b56\u622a\u6b62\u65e5\u671f\u3002","Please enter a valid 4 digit year":"\u8bf7\u8f93\u5165\u6709\u6548\u7684 4 \u4f4d\u6570\u5e74\u4efd\u3002","Registrant age must be 18 years or older":"\u6ce8\u518c\u8005\u5e74\u9f84\u4e0d\u5f97\u4f4e\u4e8e 18 \u5c81\u3002","Enter a valid Tax ID":"\u8f93\u5165\u6709\u6548\u7684\u7a0e\u53f7\u3002","Enter a valid VAT ID":"\u8f93\u5165\u6709\u6548\u7684\u589e\u503c\u7a0e\u53f7\u3002","Enter a valid Position if signing for a Business":"\u5982\u662f\u516c\u53f8\u7b7e\u6536\uff0c\u8bf7\u8f93\u5165\u6709\u6548\u7684\u804c\u52a1\u3002","Please enter a valid insurance agent\\\u0027s phone number":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u4fdd\u9669\u4ee3\u7406\u4eba\u7535\u8bdd\u53f7\u7801\u3002","Please specify a document name.":"\u8bf7\u6307\u5b9a\u6587\u6863\u540d\u3002","Please select document type.":"\u8bf7\u9009\u62e9\u6587\u6863\u7c7b\u578b\u3002","You haven\\\u0027t uploaded any documents yet.":"\u60a8\u8fd8\u672a\u4e0a\u4f20\u4efb\u4f55\u6587\u6863\u3002","View Less":"\u6536\u8d77","[.@ext] is not an allowed file extension, please upload documents only.":"[.@ext] \u4e3a\u65e0\u6548\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u4ec5\u652f\u6301\u4e0a\u4f20\u6587\u6863\u6587\u4ef6\u3002","uploaded successfully":"\u4e0a\u4f20\u6210\u529f","You haven\u0027t uploaded any documents yet.":"\u60a8\u8fd8\u672a\u4e0a\u4f20\u4efb\u4f55\u6587\u6863\u3002","uploading":"\u4e0a\u4f20","seconds left":"\u5269\u4f59\u79d2\u6570","For your security, please provide a password at least eight characters long that contains at least one number and one letter. ":"\u5b89\u5168\u8d77\u89c1\uff0c\u60a8\u7684\u5bc6\u7801\u957f\u5ea6\u5e94\u4e0d\u5c11\u4e8e 8 \u4e2a\u5b57\u7b26\uff0c\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u6570\u5b57\u548c\u4e00\u4e2a\u5b57\u6bcd\u3002","Selected file:":"\u9009\u5b9a\u6587\u4ef6\uff1a","required":"\u5fc5\u586b\u5b57\u6bb5","Stores and Galleries":"\u4f53\u9a8c\u5e97","Superchargers":"\u8d85\u7ea7\u5145\u7535\u7ad9","Store":"\u4f53\u9a8c\u5e97","Service Center":"\u670d\u52a1\u4e2d\u5fc3","Charger":"\u76ee\u7684\u5730\u5145\u7535\u7ad9","Reserve your Powerwall":"\u9884\u8ba2 Powerwall \u80fd\u6e90\u5899","Inquire about Tesla Energy for your Business or Utility":"\u54a8\u8be2 Tesla Energy \u76f8\u5173\u4fe1\u606f\uff08\u4f01\u4e1a\u6216\u516c\u7528\u4e8b\u4e1a\uff09","Become a Powerwall Distribution Partner":"\u7533\u8bf7\u6210\u4e3a Powerwall \u80fd\u6e90\u5899\u5206\u9500\u5546","reset your password":"\u8bf7\u91cd\u7f6e\u5bc6\u7801","Sorry, there was an error in saving your new password, please try again.":"\u62b1\u6b49\uff0c\u4fdd\u5b58\u60a8\u7684\u65b0\u5bc6\u7801\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","Place Order":"\u63d0\u4ea4\u8ba2\u5355","We are processing your order. Please wait.":"\u6211\u4eec\u6b63\u5728\u5904\u7406\u60a8\u7684\u8bf7\u6c42\u3002\u8bf7\u7a0d\u5019\u3002","Save Design":"\u4fdd\u5b58\u8bbe\u8ba1\u65b9\u6848"," Order Agreement":"\u8ba2\u8d2d\u534f\u8bae","Your document uploaded successfully":"\u6587\u6863\u4e0a\u4f20\u6210\u529f","Your document removed successfully":"\u6587\u6863\u5220\u9664\u6210\u529f","Skip for now":"\u6682\u65f6\u5ffd\u7565","Inquire about Powerpack for your Business or Utility":"\u54a8\u8be2 Powerpack \u76f8\u5173\u4fe1\u606f\uff08\u4f01\u4e1a\u6216\u516c\u7528\u4e8b\u4e1a\uff09","Become a Certified Powerwall Installer":"\u6210\u4e3a\u8ba4\u8bc1\u80fd\u6e90\u5899\u5b89\u88c5\u670d\u52a1\u516c\u53f8","Sorry, there was an error saving your new username, please try again.":"\u62b1\u6b49\uff0c\u4fdd\u5b58\u60a8\u7684\u65b0\u7528\u6237\u540d\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","Sorry, there was an error saving your contact info, please try again.":"\u62b1\u6b49\uff0c\u4fdd\u5b58\u60a8\u7684\u8054\u7cfb\u4eba\u4fe1\u606f\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","Sorry, there was an error saving your new email, please try again.":"\u62b1\u6b49\uff0c\u4fdd\u5b58\u60a8\u7684\u65b0\u90ae\u7bb1\u5730\u5740\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","File extension is not allowed":"\u4e0d\u652f\u6301\u6b64\u7c7b\u6587\u4ef6\u683c\u5f0f","Done":"\u5b8c\u6210","Sunday":"\u5468\u65e5","Monday":"\u5468\u4e00","Tuesday":"\u5468\u4e8c","Wednesday":"\u5468\u4e09","Thursday":"\u5468\u56db","Friday":"\u5468\u4e94","Saturday":"\u5468\u516d","Sent":"\u5df2\u53d1\u51fa","Not a valid referral code":"\u65e0\u6548\u7684\u5f15\u8350\u7801"}} };;
(function (window, document, $, Drupal) {
    Drupal.behaviors.chargiing_partner_form = {
        attach: function () {
            var $partner_details = $('#tesla-charging-partner-details');
            var $form = $('#tesla-charging-partner-form');
            var $zip_code = $('#edit-zipcode-cp');
            var $phone = $('#edit-phonenumber-cp');
            var $province_list = $('#edit-state-cp');
            var $province_list_wrapper = $('#province-wrapper');
            var $submit_button = $('#edit-submit-cp-ajax');
            $('#edit-countries-cp').change(function () {
                var url = (Drupal.settings.tesla.locale != 'en_US') ? "/" + Drupal.settings.tesla.locale : '';
                var country = $('#edit-countries-cp').val();
                $.ajax({
                    url: url + '/regex/' + country,
                    dataType: "json"
                }).success(function (data, textStatus, jqXHR) {
                    //Little hack to change the regex and message that parsley will do
                    $zip_code.attr('data-parsley-pattern', ((data.regex) ? (data.regex) : ('/^[a-zA-Z0-9\-\s]{1,}$/')));
                    $zip_code.attr('data-parsley-pattern-message', ((data.message) ? (data.message) : (Drupal.t('contains one or more illegal characters'))));
                    $zip_code.attr('maxlength', ((data.postal_code_max_length) ? (data.postal_code_max_length) : (6)));
                    $phone.val(data.phone_code);
                    //Reactivate the parsley validation
                    $zip_code.focusout();
                }).done(function (data, textStatus, jqXHR) {
                    //enable the submit button
                    $ajax_country = true;
                })

                $.post('/'+ Drupal.settings.pathPrefix +'teslaaccount/get-states', {Country: country, Translate: true}, function (data) {
                    if (data.result == "") {
                        $province_list_wrapper.addClass("hidden");
                        $partner_details.addClass('no-province');
                        $province_list.attr('data-parsley-required', 'false');

                    } else {
                        $province_list_wrapper.removeClass("hidden");
                        $partner_details.removeClass('no-province');
                        $province_list.attr('data-parsley-required', 'true');
                    }
                    $province_list.empty().append(data.result);
                });
            });
            $.fn.scrollPageToMessage = function () {
              $("html, body").animate({scrollTop: $(".section-application").offset().top}, 1000)
            };
            $submit_button.click(function (event) {
                event.preventDefault(); //prevent default form submit
                var valid = $form.parsley().validate();
                if (valid) {
                    $('#form-content-cp .modal-throbber').removeClass('hidden');
                    $(this).trigger('submit_form');
                }
            });

        }
    }
}(this, this.document, this.jQuery, this.Drupal))
;
function cache_buster_set_cookie(days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "expires="+date.toGMTString()+";";
    }
    else var expires = "";
    document.cookie = "NO_CACHE=Y;"+expires+"path=/";
};
(function (window, document, $, Drupal) {
    "use strict";

    Drupal.behaviors.tesla_user = {
        checkPassEmailField: function (origin) {
            var email = $('#edit-name').val();
            var form_error = 0;

            // if (!origin && Drupal.behaviors.common.checkEmail(email) == false) {
            //     form_error = 1;
            // }

            if (form_error === 0) {
                if (origin && origin === 'login') {
                    return Drupal.behaviors.tesla_user.submitLoginForm('login');
                }
                return Drupal.behaviors.tesla_user.submitPassForm();
            }
            return false;
        },
        submitLoginForm: function (mode, destination) {
            var form_error         = 0;
            var username_error     = 0;
            var username_error_msg = '';
            var pass_error         = 0;
            var pass_error_msg     = '';
            var display_msg        = '';
            // var top_offset = -30;

            if (mode === 'join') {
                window.location.href = destination;

            } else {
                if ($('#edit-name')) {
                    if ($('#edit-name').val() === '') {
                        form_error = 1;
                        username_error = 1;
                        username_error_msg = 'Please enter a username';
                        if (Drupal.settings.tesla.country === 'DE') {
                            username_error_msg = 'Benutzername eingeben.';

                        } else if (Drupal.settings.tesla.country === 'FR') {
                            username_error_msg = 'Veuillez entrer un username.';

                        } else if (Drupal.settings.tesla.country === 'IT') {
                            username_error_msg = 'Per favore inserisci uno username.';

                        } else if (Drupal.settings.tesla.country === 'NL') {
                            username_error_msg = 'Geef een gebruikersnaam in.';

                        } else if (Drupal.settings.tesla.country === 'JP') {
                            username_error_msg = 'ユーザー名を入力してください。';
                        }
                    }
                }

                if ($('#edit-pass')) {
                    if ($('#edit-pass').val() === '') {
                        form_error = 1;
                        pass_error = 1;
                        pass_error_msg = 'Please enter a password';
                        if (Drupal.settings.tesla.country === 'DE') {
                            pass_error_msg = 'Bitte geben Sie ein gültiges Passwort ein.';

                        } else if (Drupal.settings.tesla.country === 'FR') {
                            pass_error_msg = 'Veuiller entrer un mot de passe valide.';

                        } else if (Drupal.settings.tesla.country === 'IT') {
                            pass_error_msg = 'Per favore inserisci una password valida.';

                        } else if (Drupal.settings.tesla.country === 'NL') {
                            pass_error_msg = 'Geef een wachtwoord in.';

                        } else if (Drupal.settings.tesla.country === 'JP') {
                            pass_error_msg = '有効なパスワードを入力してください。';
                        }
                    }
                }

                if (form_error > 0) {

                    if ($('#messages-wrapper').length) {
                        if ($('#messages-wrapper').css('display') === 'block') {
                            $('#messages-wrapper').remove();
                        }
                    }

                    if (username_error === 1) {
                        $('label.edit-name').attr('class', 'label-error');
                        display_msg = username_error_msg;
                    }

                    if (pass_error === 1) {
                        $('label.edit-pass').attr('class', 'label-error');
                        display_msg = pass_error_msg;
                          // top_offset = 55;
                    }

                    if (username_error === 1 && pass_error === 1) {
                        display_msg = username_error_msg + '<br>' + pass_error_msg;
                        // top_offset = -26;
                    }

                    Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend', display_msg);

                } else {
                    // create username for all cases
                    var tmp_cookie_val = $('#edit-name').val();
                    tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
                    Drupal.behaviors.common.createCookie('tesla_username', tmp_cookie_val, 360);
                    document.forms['user-login'].submit();
                }
            }
        },
        submitPassForm: function (method) {
            if (method && method === 'cancel') {
                var dest          = $('#destination').val();
                var locale_prefix = '';
                if (Drupal.settings.tesla.locale !== 'en_US') {
                    locale_prefix = Drupal.settings.tesla.locale;
                    if (locale_prefix === 'ja_JP') {
                        locale_prefix = 'jp';
                    }
                    if (locale_prefix === 'zh_CN') {
                        locale_prefix = 'cn';
                    }
                    locale_prefix = '/' + locale_prefix;
                }

                dest = locale_prefix + '/user/login';
                window.location.href = dest;

            } else {
                var email = $('#edit-name').val();
                var form_error = 0;
                var $msgErr = '';
                if (!email.length) {
                    form_error = 1;
                    $msgErr = Drupal.t('Username or e-mail address field is required.');
                }
                if (form_error === 0) {
                    // Disable button to prevent multiple submission.
                    $('#user-pass').find('[type=submit]')
                        .prop('disabled', true)
                        .val(Drupal.t('Sent'));

                    // Submit the form.
                    document.forms['user-pass'].submit();
                } else {
                    Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend', $msgErr);
                }
            }
        },
        displayError: function (insert, position, message) {
            $('.messages.error').remove();
            if (position === 'prepend') {
                insert.prepend('<div class="messages error">' + message + '</div>');
            }
            if (position === 'append') {
                insert.append('<div class="messages error">' + message + '</div>');
            }
            if (position === 'html') {
                insert.html('<div class="messages error">' + message + '</div>');
            }
        },
        useremailCheck: function (emailField) {
            var loginField     = emailField;
            var $locale_prefix =  Drupal.settings.tesla.localePrefix;
            Drupal.useremailCheckUseremail = loginField.val();
            var $error = $('.messages');

            if (!$error.hasClass('error')) {
                $error.addClass('error');
            }
            if (Drupal.useremailCheckUseremail.length) {
                $.ajax({
                    url: $locale_prefix + '/useremail_check/isunique',
                    data: {
                        useremail: Drupal.useremailCheckUseremail
                    },
                    dataType: 'json',
                    beforeSend: function () {
                        loginField.removeClass('useremail-check-accepted')
                            .removeClass('useremail-check-rejected')
                            .addClass('useremail-check-progress');
                    },
                    success: function (ret) {
                        if (ret['allowed']) {
                            $error.empty().hide();
                            loginField.addClass('useremail-check-accepted'); // DDS-1595

                        } else {
                            Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend', ret['msg']);
                            loginField.addClass('useremail-check-rejected'); // DDS-1595
                        }
                        // checkCreateAcctFields('usermail_check_unique');
                    }
                });
            }
        },
        // check fields on each key input & only activate continue button when fields are filled
        checkCreateAcctFields: function (origin) {
            var form_error = 0;

            if (origin) {
                var fname            = $('#edit-first-name').val();
                var lname            = $('#edit-last-name').val();
                var password         = $('#edit-pass-pass1').val();
                var password_confirm = $('#edit-pass-pass2').val();

                // WEB-8822 / TFM
                // --------------
                if ($("#recaptcha_widget").length) {
                    var captcha = $('#recaptcha_response_field').val();
                }
                // --------------

                if (fname === '') {
                    form_error = 1;

                } else if (lname === '') {
                    form_error = 1;

                } else if (password === '') {
                    form_error = 1;

                } else if (password_confirm === '') {
                    form_error = 1;

                // WEB-8822 / TFM
                // --------------
                } else if (captcha === '') {
                    form_error = 1;
                }
                // --------------

                if ($('.password-description').length &&
                        $('.password-description').css('display') === 'block' &&
                        $('#edit-pass-pass2').length &&
                        $('#edit-pass-pass2').val() !== '') {
                    $('.password-description').css('display', 'none');
                }
            }

            if (form_error === 0) {
                // ------------------------
                Drupal.behaviors.tesla_user.submitCreateAcctForm(origin);
                // $('#btnCreateAccount').keyup(function(event) {
                //     Drupal.behaviors.common.checkKeyPressed(event);
                // });
            }
        },
        submitCreateAcctForm: function (origin) {
            var form_error = 0;
            var error_msg  = '';

            // WEB-8822 / TFM
            // --------------
            var uname = $('#edit-name').val();
            // --------------

            var email    = $('#edit-mail').val();
            var is_shell = $('#edit-is-shell').val();
            if (origin) {
                var fname            = $('#edit-first-name').val();
                var lname            = $('#edit-last-name').val();
                var password         = $('#edit-pass-pass1').val();
                var password_confirm = $('#edit-pass-pass2').val();

                var hasLetters     = password.match(/[a-zA-Z]+/);
                var hasNumbers     = password.match(/[0-9]+/);
                var hasPunctuation = password.match(/[^a-zA-Z0-9]+/);
                var hasCasing      = password.match(/[a-z]+.*[A-Z]+|[A-Z]+.*[a-z]+/);

                if (fname === '') {
                    form_error = 1;
                }
                if (lname === '') {
                    form_error = 1;
                }
                if (password === '') {
                    form_error = 1;
                }
                if (password_confirm === '') {
                    form_error = 1;
                }
            }

            if (Drupal.behaviors.common.checkEmail(email) === false) {
                form_error = 1;
                error_msg = 'This is not a valid email address format. Please try again.';
            }
            if (password !== password_confirm) {
                form_error = 1;
            }
            if (form_error === 0) {
                if (password.length < 8) {
                    error_msg = Drupal.t('For your security, please provide a password at least eight characters long that contains at least one number and one letter.');
                    form_error = 1;

                } else if (password === uname) {
                    error_msg = Drupal.t('For your security, please provide a password at least eight characters long that contains at least one number and one letter.');
                    form_error = 1;

                } else {
                    var count = (hasLetters ? 1 : 0) + (hasNumbers ? 1 : 0);
                    var strength_pass = count > 1 ? 'pass' : 'fail';
                    if (strength_pass === 'fail') {
                        error_msg = Drupal.t('For your security, please provide a password at least eight characters long that contains at least one number and one letter.');
                        form_error = 1;
                    }
                }
            }

            if (form_error === 1) {
                Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend' , error_msg);

            } else {
                // create login and username cookies
                var tesla_username_cookie = Drupal.behaviors.common.readCookie('tesla_username');
                var tesla_email_cookie = Drupal.behaviors.common.readCookie('tesla_email');

                // create username save cookie
                // in all cases
                if (tesla_username_cookie) {
                    Drupal.behaviors.common.eraseCookie('tesla_username');
                }
                var tmp_cookie_val = $('#edit-name').val();
                tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
                Drupal.behaviors.common.createCookie('tesla_username',tmp_cookie_val);

                // create email save cookie
                // in all cases
                if (tesla_email_cookie) {
                    Drupal.behaviors.common.eraseCookie('tesla_email');
                }
                var tmp_cookie_val = $('#edit-mail').val();
                tmp_cookie_val = encodeURIComponent(tmp_cookie_val);
                Drupal.behaviors.common.createCookie('tesla_email', tmp_cookie_val);

                if (is_shell && is_shell === 'true') {
                    debug.log('set the form action');
                    var form_action = $('#edit-shell-url').val();
                    $('#user-register').attr('action', form_action);
                }
                document.forms['user-register-form'].submit();
            }
        },
        checkResetPasswordFields: function (action) {
            $('#user-pass-reset').submit(function () {
                return false;
            });
            var $error           = $('.messages').addClass('error');
            var form_error       = 0;
            var password         = $('#edit-pass-pass1').val();
            var password_confirm = $('#edit-pass-pass2').val();
            var username         = $('#edit-username').val();
            var url_array        = $('#edit-request_url').val().split('/');
            var timestamp        = url_array.slice(-2)[0];
            var hash             = url_array.slice(-2)[1];

            var error_msg = Drupal.t('For your security, please provide a password at least eight characters long that contains at least one number and one letter.');

            $('label[for="edit-pass"]').css('color', '#666666');
            $('label[for="edit-pass-confirm"]').css('color', '#666666');

            if (password === '' || password === null) {
                form_error = 1;
            }
            if (password_confirm === '' || password_confirm === null) {
                form_error = 1;
            }

            if (action === 'submit') {
                var hasLetters     = password.match(/[a-zA-Z]+/);
                var hasNumbers     = password.match(/[0-9]+/);
                var hasPunctuation = password.match(/[^a-zA-Z0-9]+/);
                var hasCasing      = password.match(/[a-z]+.*[A-Z]+|[A-Z]+.*[a-z]+/);

                if (password.length < 8) {
                    form_error = 1;

                } else if (password === username) {
                    error_msg = Drupal.t('Your password cannot be the same as your username.');
                    form_error = 1;

                } else {
                    var count = (hasLetters ? 1 : 0) + (hasNumbers ? 1 : 0);
                    var strength_pass = count > 1 ? "pass" : "fail";

                    if (strength_pass === 'fail') {
                        error_msg = Drupal.t('For your security, please provide a password at least eight characters long that contains at least one number and one letter.');
                        form_error = 1;
                    }
                }

            }

            if (form_error === 0) {
                if (action === 'submit') {
                    var userid        = $('#edit-uid').val();
                    var page_origin   = 'reset';
                    var locale_prefix =  Drupal.settings.tesla.localePrefix;

                    $.post(locale_prefix + '/user/reset-password', {
                        uid: userid,
                        pass: password,
                        origin: page_origin,
                        hash: hash,
                        timestamp: timestamp
                    }, function (response) {
                        if (!response.success) {
                            Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend', response.message);
                        } else {
                            if (response.redirect_url !== undefined) {
                                window.location.href = response.redirect_url;
                            } else {
                                Gatekeeper.settings = Drupal.settings.Gatekeeper;
                                Gatekeeper.Helpers.setCookies(name);
                                Gatekeeper.Helpers.startSession(response.auth.data, response.auth.region);
                            }
                        }
                    });
                }
            } else {
                if (!$error.hasClass('error')) {
                    $error.addClass('error');
                }
                Drupal.behaviors.tesla_user.displayError($('.my-form-wrapper'), 'prepend', error_msg);
            }
        },
        attach: function (context, settings) {
            if ($('#messages-wrapper').length) {
                $('.my-form-wrapper').prepend($('#messages-wrapper div'));
            }
        }
    };
}(this, this.document, this.jQuery, this.Drupal));
;
